# Git Plugin Configuration
#
# This file configures the git plugin's security rules and limits.
# Place in ~/.claude-container/config/git.yaml

plugin: git
version: 1

# Credentials (loaded from environment at startup)
credentials:
  GITHUB_TOKEN: ${GITHUB_TOKEN}
  GH_TOKEN: ${GH_TOKEN}

# Execution rules
rules:
  # Branch protection - these branches cannot be pushed to directly
  blocked_branches:
    - main
    - master
    - release/*
    - production

  # Allowed branch name patterns for new branches
  # Claude must create branches matching these patterns
  allowed_branch_patterns:
    - claude/*
    - feature/*
    - fix/*
    - bugfix/*
    - hotfix/*

  # Blocked git subcommands (space-separated for multi-word)
  blocked_subcommands:
    - config --global
    - remote set-url
    - remote remove
    - remote rename

  # Push restrictions
  allow_force_push: false
  allow_delete_remote: false

# Resource limits
limits:
  timeout_seconds: 300
  max_output_bytes: 1048576  # 1MB

# Access control
access:
  # UIDs allowed to use this plugin (empty = allow all)
  allowed_uids: []
  # Socket file permissions
  socket_permissions: 0660
