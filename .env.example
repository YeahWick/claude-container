# Claude Code Container - Environment Configuration
# Copy this file to .env and fill in your values

# ============================================================
# Credentials (Managed by Credential Agent)
# ============================================================
# These credentials are loaded by the credential agent at startup,
# then immediately cleared from environment variables.
# They are stored in locked memory (no swap) and accessed via Unix socket.

# GitHub personal access token
# Required for pushing to repositories
# Generate at: https://github.com/settings/tokens
GITHUB_TOKEN=

# GitLab personal access token (optional)
GITLAB_TOKEN=

# AWS credentials (optional)
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=

# NPM registry token (optional)
NPM_TOKEN=

# PyPI upload token (optional)
PYPI_TOKEN=

# Docker registry token (optional)
DOCKER_TOKEN=

# ============================================================
# Branch Protection
# ============================================================

# Branches to block from push operations (JSON array)
# Default: ["main","master"]
PROXY_GITHUB_BLOCKED_BRANCHES=["main","master"]

# Allowed branch patterns (JSON array of glob patterns)
# If set, only branches matching these patterns can be pushed
# Example: ["username/*","feature/*","claude/*"]
# Leave empty to allow all branches (except blocked ones)
PROXY_GITHUB_ALLOWED_BRANCH_PATTERNS=

# ============================================================
# Paths and Directories
# ============================================================

# Path to your Anthropic API key file
# Default: ~/.anthropic_key
ANTHROPIC_KEY_FILE=~/.anthropic_key

# Project directory to mount as workspace
# Default: current directory
PROJECT_DIR=.

# ============================================================
# Debug Settings
# ============================================================

# Enable debug mode for proxy (true/false)
PROXY_DEBUG=false

# Enable debug mode for credential agent (true/false)
AGENT_DEBUG=false

# ============================================================
# Security Settings
# ============================================================

# Shared secret for proxy authentication
# If set, all proxy requests must include this secret
# Generate with: openssl rand -hex 32
# Both proxy and claude containers need this value
PROXY_AUTH_SECRET=

# Require authentication when secret is set (default: true)
# Set to false to make auth optional (useful for debugging)
PROXY_AUTH_REQUIRED=true

# ============================================================
# Credential Agent Settings
# ============================================================

# UIDs allowed to request credentials (comma-separated)
# Default: 1000 (claude user in container)
# AGENT_ALLOWED_UIDS=1000

# Socket path for credential agent (usually don't change this)
# AGENT_SOCKET_PATH=/run/agent/cred.sock
